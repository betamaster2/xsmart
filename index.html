<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<style>
		* {
			background-color: transparent;
		}
	</style>
	<script>
		function findGetParameter(referrer, parameterName) {
			var result = null,
				tmp = [];
			var items = referrer.substr(1).split("&");
			for (var index = 0; index < items.length; index++) {
				tmp = items[index].split("=");
				if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
			}
			return result;
		};

		var getLocation = function(href) {
			var l = document.createElement("a");
			l.href = href;
			return l;
		};

		var href = 'http://app.xsmart.tv/';
		var referrer = getLocation(document.referrer);
		var referrer_ref = findGetParameter(referrer.search, "referrer");
		
		if (referrer.hostname === getLocation(href).hostname) {
			window.location = referrer_ref;
		} else {
			window.location = href + "?referrer=" + document.referrer;
		}
	</script>
</body>
</html>
